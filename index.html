<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Books</title>
    
</head>
<body>
    <div id="container">
        <h2 id="input-heading">Add a Book!</h2>
        <h2 id="books-heading">Library Books</h2>
        <form id='formStyle'>    
            <label for="InputTitle">Book title: </label>
                <input type="text" id="InputTitle">
            <label for="InputAuthor">Book author: </label>
                <input type="text" id="InputAuthor">
            <label for="InputPages">Pages: </label>
                <input type="text" id="InputPages">
            <label for="InputRead">Read: </label>
            <input type="text" id="InputRead">
            <button id="addBookButton" type="button" onclick="addBookToLibrary()">NEW BOOK</button>
        </form>
        <div id="libraryShelf">
            
            
        </div>
    </div>
<script>

    const pageContainer = document.getElementById('container');
        pageContainer.style.display = 'flex';
        pageContainer.style.flexWrap = 'wrap';
        pageContainer.style.width = '900px';
        pageContainer.style.margin = 'auto';
        pageContainer.style.justifyContent = 'space-around';
    


    const libraryBooks = document.getElementById('libraryShelf');
        libraryBooks.style.backgroundColor = '#ffe';
        libraryBooks.style.paddingTop = '20px';
        libraryBooks.style.paddingBottom = '40px';
        libraryBooks.style.display = 'flex';
        libraryBooks.style.flexWrap = 'wrap';
        libraryBooks.style.justifyContent = 'start';
        libraryBooks.style.gap = '10px';
        libraryBooks.style.fontSize = '24px';
        libraryBooks.style.flexBasis = '70%';

    const inputHeading = document.getElementById('input-heading');
        inputHeading.style.flexBasis = '45%';
    
    const booksHeading = document.getElementById('books-heading');
        booksHeading.style.flexBasis = '45%';
    

    const formStyle = document.getElementById('formStyle');
        formStyle.style.display = 'flex';
        formStyle.style.flexDirection = 'column';
        formStyle.style.width = '300px';
        formStyle.style.flexBasis = '25%';
        formStyle.style.fontSize = '20px';

    

    const inputBox = document.getElementsByTagName('input');
        for (let i = 0; i < inputBox.length; i++){
            const input = inputBox[i];
            input.style.height = '30px';
            input.style.margin = '5px 0px 20px'
            
        };

    
    const myLibrary = [];    
        

    function Books(title, author, pages, read) {
        this.title = title
        this.author = author
        this.pages = pages
        this.read = read
        this.toggleReadStatus = function() {
                                this.read = !this.read; 
                                // Toggle the read status (from true to false or vice versa)
                                 };
        this.info = function() {
                    this.cardInfo = `${this.title}, by ${this.author}`
                    this.cardSummary = `The ${this.title} by ${this.author} is ${this.pages} pages, read book: ${this.read}`;
                
                    return `${this.cardInfo} \n ${this.cardSummary}`;
                     }        
    };
    
    


    function addBookToLibrary(title,author,pages,read) {
        const userInputTitle = document.getElementById('InputTitle');
            let inputValue = userInputTitle.value;
        const userInputAuthor = document.getElementById('InputAuthor');
            let inputAuthor = userInputAuthor.value;
        const userInputPages = document.getElementById('InputPages');
            let inputPages = userInputPages.value;
        const userInputRead = document.getElementById('InputRead');
            let inputRead = userInputRead.value;
            if (userInputAuthor === '' || userInputPages === '' || userInputTitle === '' || userInputRead === '') {
                alert('Please enter book info.');
            } else {
              this.book = new Books(inputValue, inputAuthor, inputPages, inputRead);
                myLibrary.push(book);
                const card = this.book;
                    

                    userInputTitle.value = '';
                    userInputAuthor.value = '';
                    userInputPages.value = '';
                    userInputRead.value = '';

                card.info();
                let cardDiv = document.createElement('div');
                const subtext = document.createElement('div');
                const button = document.createElement('button');
                const toggleButton = document.createElement('button');

                    toggleButton.addEventListener('click', function () {
                        console.log("Before toggling read status:");
                        console.log(card.info()); // Displays book information
                        card.toggleReadStatus();
                        
                        console.log("After toggling read status:");
                        console.log(card.info()); // Displays updated book information
                    })

                    cardDiv.setAttribute('class', 'cardDiv');
                    cardDiv.style.maxWidth = '175px';                                      
                    cardDiv.style.padding = '10px';                                      
               
                    subtext.style.fontSize = '16px';
                
                    button.textContent = 'Delete';
                    button.addEventListener('click', function () {
                        let deletedCardDiv = card;
                        
                        console.table(myLibrary)
                       if (cardDiv) {
                        cardDiv.parentNode.removeChild(cardDiv);

                        const index = myLibrary.indexOf(deletedCardDiv);
                            if (index !== -1) {
                                myLibrary.splice(index, 1);
                            }

                        console.table(myLibrary);
                       }
                       
                    });
                    toggleButton.textContent = 'Read';



                    libraryBooks.append(cardDiv);
                    cardDiv.append(card.cardInfo);
                    cardDiv.append(subtext);
                    subtext.append(card.cardSummary);                   
                    cardDiv.append(button);
                    cardDiv.append(toggleButton);
                    
            }        

            
    }    

</script>     
   
</body>
</html>